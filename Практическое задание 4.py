def max_dragon_power(N):
    # Оптимальная стратегия - разделить число на тройки,
    # так как 3 дает максимальный вклад в произведение при минимальном количестве элементов

    if N <= 7:
        return N  # Если всего одна голова, её мощность равна количеству голов

    result = []
    while N >= 3 and len(result) + 1 <= 7:
        result.append(3)
        N -= 3

    # Добавляем остатки, следуя правилам оптимального выбора:
    # Оставшиеся 1 лучше добавить к последнему элементу, превратив его в 4
    # Остаток 2 добавляется отдельно
    if N == 1:
        result[-1] += 1
    elif N == 2:
        result.append(2)

    # Переводим список в строку и считаем произведение
    product = 1
    for num in result:
        product *= num

    return product


# Пример использования:
print(max_dragon_power(8))  # Пример: Вход 8, Выход 18 (3*3*2)